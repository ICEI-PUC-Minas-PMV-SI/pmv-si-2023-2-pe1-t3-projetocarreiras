<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Jobify | Aplicar</title>
</head>
    <body>
        <header class="header">
            <nav class="nav">
              <a href="../../../index.html">
                <img class="logo" src="./../../../docs/img/logo-sem-background.png" alt="">
              </a>
              <ul class="nav_links">
                  <li><a href="/src/html/navegacao/vagas.html">Vagas</a></li>
                  <li><a href="/src/html/aprimore-se/aprimore-se.html">Aprimore-se</a></li>
                  <li><a href="/src/html/navegacao/sobre.html">Sobre</a></li>
              </ul>
                <img src="../../../docs/img/personas/marina.png" alt="" class="user-pic" onclick="toggleMenu()" />
                <div class="sub-menu-wrap" id="subMenu">
                    <div class="sub-menu">
                        <div class="user-info">
                            <img src="../../../docs/img/personas/marina.png" alt="" />
                            <h2>Marina Yoshida</h2>
                        </div>
                        <hr />
      
                          <a href="#" class="sub-menu-link">
                              <i class="fas fa-user-alt"></i>
                              <p>Editar Perfil</p>
                              <span></span>
                          </a>
                          <a href="../minhas_vagas_usuario-empresa/minhasvagas.html" class="sub-menu-link">
                              <i class="fas fa-folder"></i>
                              <p>Minhas candidaturas</p>
                              <span></span>
                        </a>
                        <a href="alerta.html" class="sub-menu-link">
                            <i class="fas fa-bell"></i>
                            <p>Meus alertas</p>
                            <span></span>
                          </a>
                        <a href="#" class="sub-menu-link">
                              <i class="fas fa-cog"></i>
                              <p>Configurações</p>
                              <span></span>
                        </a>
                        <a href="#" class="sub-menu-link">
                              <i class="fas fa-question-circle"></i>
                              <p>Ajuda e Suporte</p>
                              <span></span>
                        </a>
                        <a href="../../../index.html" class="sub-menu-link">
                              <i class="fas fa-sign-out-alt"></i>
                              <p>Sair</p>
                              <span></span>
                        </a>
                    </div>
                </div>
            </nav>
            <div class="menu-btn" onclick="openNav()">
              <i class="fa-sharp fa-solid fa-bars fa-beat-fade fa-2x"></i>
            </div>
            <div id="myNav" class="overlay">
                <a href="javascrip:void(0)" class="closemenu" onclick="closeNav()">&times;</a>
                
                <div class="menu-items">
                    <a href="#">Home</a>
                    <a href="#">Vagas</a>
                    <a href="#">Aprimore-se</a>
                    <a href="#">Sobre</a>
                    <a href="#">Contato</a>
                </div>
            </div>
          </header>
        <main>
            <section>
                <ul class="breadcrumbs">
                    <li class="breadcrumbs-item">
                        <a href="../../../index.html" class="breadcrumbs-link">Home</a>
                    </li>
                    <li class="breadcrumbs-item">
                        <a href="vagas.html" class="breadcrumbs-link">Vagas</a>
                    </li>
                    <li class="breadcrumbs-item">
                        <a href="detalhes_vaga.html" class="breadcrumbs-link">Pessoa Arquiteta</a>
                    </li>
                    <li class="breadcrumbs-item">
                        <a href="aplicar.html" class="breadcrumbs-link active">Aplicar</a>
                    </li>
                </ul>

            </section>

            <section class="container">
                <div class="perfil-descricao">
                    <div class="cabecalho-aplicar">
                        <img src="../../../docs/img/logos/dashaus.png" alt="" class="img-aplicar">
                     <h2>Pessoa Arquiteta</h2> 
                     <h3>DasHaus Engineering</h3>
                     <div class="detalhes-vaga">
                         <div class="detalhe-vaga">
                             <i class="fa-solid fa-map-location-dot"></i>
                             <span>Belo Horizonte</span>
                         </div>
                         <div class="detalhe-vaga">
                             <i class="fa-solid fa-briefcase"></i>
                             <span>CLT</span>
                         </div>
                         <div class="detalhe-vaga">
                             <i class="fa-solid fa-building"></i>
                             <span>Presencial</span>
                         </div>
                         <div class="detalhe-vaga">
                             <i class="fa-solid fa-money-bill-1-wave"></i>
                             <span>R$3.200</span>
                         </div>
                     </div>
                     
                     <div class="info-user">
                         <div class="contato-user">
                             <h4>Suas informações de contato:</h4>
                             <form>
                                <div class="form-group">
                                    <label for="first-name">Nome:</label>
                                    <input type="text" id="first-name" name="first-name" placeholder="Digite seu nome">
                                </div>
                                <div class="form-group">
                                    <label for="email">E-mail:</label>
                                    <input type="email" id="email" name="email" placeholder="Digite seu e-mail">
                                </div>
                                <div class="form-group">
                                    <label for="phone">Telefone:</label>
                                    <input type="tel" id="phone" name="phone" placeholder="(00) 00000-0000" oninput="formatPhoneNumber(this)">
                                </div>
                              </form>
                         </div>  
                     </div>
                     <div class="perguntas-form">
                        <form id="formCurriculo">
                            <label for="curriculo">Clique aqui para anexar seu currículo</label>
                            <input type="file" id="curriculo" name="curriculo">
                            <div id="curriculoDisplay"></div>
                        </form>
                        
                         <br>

                         <div class="infoEmpresa">
                             <h3></h3>
                         </div>

                         <form>
                            <label for=""><p>Por que você gostaria de trabalhar conosco? <span class="asterisco">*</span></p> </label>
                            <textarea id="descricao" name="descricao" rows="5" cols="40" style="width: 100%; height: 100px;"></textarea>
                         </form>
                         <form>
                            <p>Você tem disponibilidade de início imediato? <span class="asterisco">*</spa></p>
                             <input type="radio" id="html" name="fav_language" value="HTML">
                             <label for="html">Sim</label><br>
                             <input type="radio" id="css" name="fav_language" value="CSS">
                             <label for="css">Não</label><br>
                         </form>
                         <form>
                             <p>Você tem disponibilidade de trabalhar presencialmente? <span class="asterisco">*</span></p>
                             <input type="radio" id="html" name="fav_language2" value="HTML">
                             <label for="html">Sim</label><br>
                             <input type="radio" id="css" name="fav_language2" value="CSS">
                             <label for="css">Não</label><br>    
                         </form>  
                           
                         <button id="btnAplicar" class="botao-aplicar">Aplicar</button>
                         
                     </div>
                </div>
            </section>  
            
        </main>

        <footer>
            <div class="footer__sub">
                <p>&copy; 2023 PUC Minas. Todos os direitos reservados. | Desenvolvido por <a href="#">Grupo 04</a></p>
            </div>
        </footer>    
      
        

        <script>
            function formatPhoneNumber(input) {
                // Remove tudo, exceto os números
                var telNumber = input.value.replace(/\D/g, '');

                // Aplica a máscara de telefone
                if (telNumber.length === 12) {
                    input.value = `+${telNumber.substring(0, 2)} (${telNumber.substring(2, 4)}) ${telNumber.substring(4, 8)}-${telNumber.substring(8, 12)}`;
                } else if (telNumber.length === 11) {
                    input.value = `(${telNumber.substring(0, 2)}) ${telNumber.substring(2, 7)}-${telNumber.substring(7, 11)}`;
                } else if (telNumber.length > 2 && telNumber.length <= 10) {
                    input.value = `(${telNumber.substring(0, 2)}) ${telNumber.substring(2, 6)}-${telNumber.substring(6, 10)}`;
                } else {
                    input.value = telNumber;
                }
            }

            // Anexar curriculo
            document.addEventListener('DOMContentLoaded', function () {
                var inputCurriculo = document.getElementById('curriculo');
                var curriculoDisplay = document.getElementById('curriculoDisplay');
                
                inputCurriculo.addEventListener('change', handleFileSelect);

                function handleFileSelect(event) {
                    var curriculoFile = event.target.files[0];

                    if (curriculoFile) {
                        curriculoDisplay.textContent = 'Currículo anexado: ' + curriculoFile.name;
                    } else {
                        curriculoDisplay.textContent = '';
                    }
                }
            });

            document.getElementById('btnAplicar').addEventListener('click', function() {
                // Obtenha os valores dos campos
                var curriculo = document.getElementById('curriculo').value;
                var descricao = document.getElementById('descricao').value;
                var disponibilidadeImediato = document.querySelector('input[name="fav_language"]:checked');
                var disponibilidadePresencial = document.querySelector('input[name="fav_language"]:checked');

                // Verifique se todos os campos estão preenchidos
                if (curriculo && descricao && disponibilidadeImediato && disponibilidadePresencial) {
                    alert('Aplicação realizada com sucesso!');
                } else {
                    alert('Por favor, preencha todos os campos antes de aplicar.');
                }
            });

            document.getElementById('btnAplicar').addEventListener('click', function () {
                // Obter os valores do formulário
                var nome = document.getElementById('first-name').value;
                var email = document.getElementById('email').value;
                var telefone = document.getElementById('phone').value;
                var nomeDaVaga = document.querySelector('.cabecalho-aplicar h2').textContent;
                var descricao = document.getElementById('descricao').value;

                // Converter o currículo para uma string e armazenar no localStorage
                var inputCurriculo = document.getElementById('curriculo');
                var curriculoString = '';

                if (inputCurriculo.files.length > 0) {
                    var curriculoFile = inputCurriculo.files[0];
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        curriculoString = e.target.result;

                        // Criar um ID único para esta aplicação
                        var aplicacaoId = 'aplicacao_' + Date.now();

                        // Criar um objeto com os dados da aplicação, incluindo o currículo
                        var aplicacaoData = {
                            nome: nome,
                            email: email,
                            telefone: telefone,
                            nomeDaVaga: nomeDaVaga,
                            descricao: descricao,
                            curriculo: curriculoString
                        };

                        localStorage.setItem(aplicacaoId, JSON.stringify(aplicacaoData));

                        // Limpar os campos do formulário
                        clearFormFields();
                    };

                    reader.readAsDataURL(curriculoFile);
                } else {
                    alert('Por favor, anexe seu currículo antes de aplicar.');
                }
            });

            // Função para limpar os campos do formulário
            function clearFormFields() {
                document.getElementById('first-name').value = '';
                document.getElementById('email').value = '';
                document.getElementById('phone').value = '';
                document.getElementById('curriculo').value = '';
                document.getElementById('curriculoDisplay').textContent = '';
                document.getElementById('descricao').value = '';
                document.querySelector('input[name="fav_language"][value="CSS"]').checked = false;
                document.querySelector('input[name="fav_language"][value="HTML"]').checked = false;
                document.querySelector('input[name="fav_language2"][value="CSS"]').checked = false;
                document.querySelector('input[name="fav_language2"][value="HTML"]').checked = false;
            }

        </script>
    </body>
</html>

